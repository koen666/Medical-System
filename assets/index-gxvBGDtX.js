import{_ as ee,r as h,c as se,a as l,b as e,d as j,F as x,e as k,f as H,g as T,t as o,w as te,n as b,v as ie,h as ae,i as ne,u as oe,j as B,E as u,o as c}from"./index-C6aXvd6r.js";const le={class:"ai-diagnosis-chat"},ce={class:"left-navigation"},re={class:"nav-menu"},de=["onClick"],ue=["innerHTML"],ve={class:"nav-content"},pe={class:"nav-label"},he={class:"nav-desc"},fe={class:"chat-main"},me={class:"messages-wrapper"},ge={key:0,class:"welcome-message"},ye={class:"quick-examples"},_e={key:0,class:"user-message"},we={class:"message-bubble user-bubble"},xe={class:"message-text"},ke={class:"message-time"},be={key:1,class:"ai-message"},ze={class:"message-content ai-content"},Ce={class:"ai-response-card"},Me={class:"response-header"},He={class:"message-time"},Te={class:"graph-section"},Ve={class:"graph-container"},Be={viewBox:"0 0 600 300",class:"knowledge-graph"},Se={class:"node-group symptom"},Ie={x:"180",y:"85","text-anchor":"middle",class:"node-label","font-size":"11"},Le={class:"node-group symptom"},$e={x:"420",y:"85","text-anchor":"middle",class:"node-label","font-size":"11"},je={class:"node-group symptom"},Re={x:"120",y:"155","text-anchor":"middle",class:"node-label","font-size":"10"},De={class:"node-group symptom"},Ee={x:"480",y:"155","text-anchor":"middle",class:"node-label","font-size":"10"},Ne={class:"analysis-section"},Ae={class:"section-title"},Ke={class:"confidence-badge"},Oe={class:"diagnosis-block"},Pe={class:"diagnosis-items"},Fe={class:"diag-header"},Je={class:"diag-rank"},Ue={class:"diag-name"},qe={class:"diag-prob"},Ge={class:"diag-desc"},Qe={class:"recommendations-block"},We={class:"rec-tags"},Xe={class:"notes-block"},Ye={class:"notes-list"},Ze={key:1,class:"message-item assistant"},es={key:0,class:"keywords-bar"},ss={class:"keywords-header"},ts={class:"keywords-count"},is={class:"keywords-list"},as={class:"kw-text"},ns={class:"kw-category"},os={class:"input-area"},ls={class:"input-container"},cs={class:"input-tools"},rs=["onKeydown"],ds=["disabled"],us={class:"right-progress"},vs={class:"progress-header"},ps={class:"progress-percentage"},hs={class:"progress-timeline"},fs={class:"step-indicator"},ms={class:"step-number"},gs={key:0,class:"step-connector"},ys={class:"step-content"},_s={class:"step-title"},ws={class:"step-desc"},xs={key:0,class:"step-timestamp"},ks={__name:"index",setup(bs){const F=oe(),R=h("diagnosis"),J=h([{key:"diagnosis",label:"智能诊断",desc:"AI辅助诊断",icon:'<svg viewBox="0 0 24 24" width="24" height="24"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" fill="currentColor"/></svg>'},{key:"records",label:"病历管理",desc:"历史记录",icon:'<svg viewBox="0 0 24 24" width="24" height="24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" fill="currentColor"/></svg>'},{key:"analytics",label:"数据分析",desc:"统计报表",icon:'<svg viewBox="0 0 24 24" width="24" height="24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" fill="currentColor"/></svg>'}]),m=h([]),p=h(""),S=h(!1),V=h(null),g=h(null),y=h([]),C=h(!1),D=[{name:"偏头痛（无先兆）",probability:87,priority:"high",reason:"患者主诉搏动性头痛，伴恶心呕吐、畏光，符合偏头痛典型表现"},{name:"病毒性脑膜炎",probability:46,priority:"medium",reason:"发热伴头痛，需排除颅内感染可能"},{name:"颈源性头痛",probability:31,priority:"low",reason:"需结合颈部体格检查及影像学资料"}],E=[{name:"血常规检查",priority:"high"},{name:"头颅CT/MRI",priority:"high"},{name:"C反应蛋白",priority:"medium"},{name:"脑脊液检查",priority:"medium"}],N=["密切观察患者体温变化，注意有无颈项强直等脑膜刺激征","询问既往偏头痛病史及家族史，评估发作频率和诱因","建议完善神经系统查体，排除局灶性神经功能缺损"],A=["患者张三，男性，45岁，主诉头痛3天，伴有发热38.5℃、恶心、呕吐。既往高血压病史5年，规律服药。","患者李四，女性，28岁，发热2天，体温39℃，伴咳嗽、咽痛、全身乏力。无既往病史。"],_=h([{id:1,title:"信息采集",desc:"患者信息录入",status:"pending",timestamp:""},{id:2,title:"关键词提取",desc:"AI智能分析",status:"pending",timestamp:""},{id:3,title:"图谱关联",desc:"知识图谱检索",status:"pending",timestamp:""},{id:4,title:"诊断建议",desc:"生成分析报告",status:"pending",timestamp:""},{id:5,title:"方案输出",desc:"治疗方案生成",status:"pending",timestamp:""}]),U=se(()=>{const i=_.value.filter(t=>t.status==="completed").length,s=_.value.filter(t=>t.status==="active").length;return Math.round((i+s*.5)/_.value.length*100)}),q=()=>{F.push("/knowledge-base")},K=i=>{p.value=A[i],B(()=>{L()})},I=()=>{const i=new Date;return`${String(i.getHours()).padStart(2,"0")}:${String(i.getMinutes()).padStart(2,"0")}`},L=async()=>{if(!p.value.trim())return;let i=p.value,s="";if(M)try{u.info("正在识别图片中的文字，请稍候...");const a=new FormData;a.append("image",M,M.name);const d=new AbortController,n=setTimeout(()=>d.abort(),12e4),w=await fetch("http://8.138.92.166:8000/image2text",{method:"POST",body:a,signal:d.signal});clearTimeout(n);const v=await w.json();if(w.ok&&v&&v.text){s=v.text;const z=/\[已上传图片:.*?\]\n/g,P=i.replace(z,"").trim();i=s+(P?`
`+P:""),u.success(`图片文字识别完成: ${s.substring(0,20)}...`)}else u.error(v&&v.error||"图片识别失败，仅使用输入文字"),i=i.replace(/\[已上传图片:.*?\]\n/g,"").trim()}catch(a){a.name==="AbortError"?u.error("图片识别超时，请检查网络或稍后重试"):u.error("图片识别出错: "+a.message),i=i.replace(/\[已上传图片:.*?\]\n/g,"").trim()}finally{M=null}if(!i.trim()){u.warning("没有可用的文本内容");return}const t={role:"user",content:i,time:I()};m.value.push(t);const r=i;p.value="",B(()=>{g.value&&(g.value.style.height="24px")}),$(),f(1,"completed"),f(2,"active"),setTimeout(()=>{G(r),f(2,"completed"),f(3,"active")},800),S.value=!0,$(),setTimeout(()=>{f(3,"completed"),f(4,"active"),setTimeout(()=>{S.value=!1;const a={role:"assistant",time:I(),keywords:y.value.slice(0,4).map(d=>d.text),confidence:87,diagnosis:D,recommendations:E,notes:N};m.value.push(a),f(4,"completed"),f(5,"active"),setTimeout(()=>{f(5,"completed")},1e3),$()},1500)},2e3)},G=async i=>{try{const s=await fetch("http://8.138.92.166:8000/extract_keywords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:i})}),t=await s.json();if(s.ok&&t&&t.keywords){const d=t.keywords.split(/[,，]/).map(n=>n.trim()).filter(n=>n).map((n,w)=>{let v="症状",z="medium";return n.includes("岁")?v="年龄":n.includes("男")||n.includes("女")?v="性别":(n.includes("天")||n.includes("周")||n.includes("月"))&&(v="病程"),n.includes("严重")||n.includes("剧烈")||n.includes("高热")?z="high":(n.includes("轻微")||n.includes("轻度"))&&(z="low"),{text:n,intensity:z,category:v,confidence:.95-w*.05}});y.value=d}else O(i)}catch{O(i)}},O=i=>{const s=[];(i.includes("头痛")||i.includes("头疼"))&&s.push({text:"头痛",intensity:"high",category:"症状",confidence:.95}),(i.includes("发热")||i.includes("发烧"))&&s.push({text:"发热",intensity:"high",category:"症状",confidence:.92}),i.includes("呕吐")&&s.push({text:"呕吐",intensity:"medium",category:"症状",confidence:.88}),i.includes("恶心")&&s.push({text:"恶心",intensity:"medium",category:"症状",confidence:.85}),i.includes("咳嗽")&&s.push({text:"咳嗽",intensity:"medium",category:"症状",confidence:.83}),(i.includes("咽痛")||i.includes("喉咙痛"))&&s.push({text:"咽痛",intensity:"medium",category:"症状",confidence:.8}),(i.includes("乏力")||i.includes("疲劳"))&&s.push({text:"乏力",intensity:"low",category:"症状",confidence:.75});const t=i.match(/(\d+)\s*岁/);t&&s.push({text:`${t[1]}岁`,intensity:"medium",category:"年龄",confidence:.99}),i.includes("男性")||i.includes("男，")?s.push({text:"男性",intensity:"medium",category:"性别",confidence:.99}):(i.includes("女性")||i.includes("女，"))&&s.push({text:"女性",intensity:"medium",category:"性别",confidence:.99});const r=i.match(/(\d+)\s*天/);r&&s.push({text:`${r[1]}天`,intensity:"medium",category:"病程",confidence:.95}),y.value=s},Q=()=>{B(()=>{if(g.value){g.value.style.height="auto";const i=g.value.scrollHeight,s=24,t=200;i>s?g.value.style.height=Math.min(i,t)+"px":g.value.style.height=s+"px"}})},W=async()=>{if(C.value)window._currentMediaRecorder&&window._currentMediaRecorder.state!=="inactive"&&window._currentMediaRecorder.stop(),C.value=!1;else try{C.value=!0;const i=await navigator.mediaDevices.getUserMedia({audio:!0});let s="audio/webm";MediaRecorder.isTypeSupported("audio/wav")?s="audio/wav":MediaRecorder.isTypeSupported("audio/mp3")&&(s="audio/mp3");const t=new MediaRecorder(i,{mimeType:s}),r=[];t.ondataavailable=a=>{a.data&&a.data.size>0&&r.push(a.data)},t.onstop=async()=>{let a="webm";s==="audio/wav"&&(a="wav"),s==="audio/mp3"&&(a="mp3");const d=new Blob(r,{type:s});i.getTracks().forEach(n=>n.stop());try{u.info("正在识别语音...");const n=new FormData;n.append("audio",d,`recording.${a}`);const w=await fetch("http://8.138.92.166:8000/audio2text",{method:"POST",body:n});let v=null;try{v=await w.json()}catch{u.error("后端未返回有效 JSON");return}w.ok&&v&&v.text?(p.value=v.text,u.success("语音识别完成")):u.error(v&&v.error||"语音识别失败")}catch(n){console.error(n),u.error("语音识别过程出错")}},window._currentMediaRecorder=t,t.start(),u.info("录音中，再次点击停止")}catch(i){console.error(i),u.error("无法访问麦克风，请检查权限"),C.value=!1}};let M=null;const X=()=>{const i=document.createElement("input");i.type="file",i.accept=".txt,.pdf,.doc,.docx,.png,.jpg,.jpeg,.gif,.bmp",i.onchange=async s=>{const t=s.target.files[0];if(!t)return;if(["image/png","image/jpeg","image/jpg","image/gif","image/bmp"].includes(t.type)){M=t;const a=`[已上传图片: ${t.name}]
`;p.value.includes(a)||(p.value=a+p.value),u.success(`已添加图片: ${t.name}，可继续输入文字后按回车发送`)}else p.value=`[已上传文件: ${t.name}]

`+A[0],u.info("已上传文件，暂时使用模拟数据")},i.click()},$=()=>{B(()=>{V.value&&(V.value.scrollTop=V.value.scrollHeight)})},f=(i,s)=>{const t=_.value.find(r=>r.id===i);t&&(t.status=s,s==="completed"&&(t.timestamp=I()))},Y=async()=>{try{const i=m.value[m.value.length-1];if(!i||i.role!=="assistant"){u.warning("请先进行诊断分析");return}const s="患者基本信息待补充",t=y.value.map(n=>n.text).join(", ");if(!t){u.warning("未提取到症状关键词");return}const r=i.diagnosis?i.diagnosis.slice(0,3).map(n=>n.name).join(", "):"待进一步诊断";u.info("正在生成诊断报告...");const a=await fetch("http://8.138.92.166:8000/generate_report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_info:s,keywords:t,diseases:r})}),d=await a.json();a.ok&&d&&d.report?(alert(`诊断报告

${d.report}`),u.success("报告生成成功")):u.error(d&&d.error||"报告生成失败")}catch(i){console.error(i),u.error("生成报告时出错")}},Z=()=>{m.value.length!==0&&confirm("确定要清空所有对话吗？")&&(m.value=[],y.value=[],_.value.forEach(i=>{i.status="pending",i.timestamp=""}))};return(i,s)=>(c(),l("div",le,[e("aside",ce,[s[4]||(s[4]=j('<div class="nav-header" data-v-a5f0ffc1><div class="logo" data-v-a5f0ffc1><svg viewBox="0 0 24 24" width="32" height="32" data-v-a5f0ffc1><path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z" fill="currentColor" opacity="0.2" data-v-a5f0ffc1></path><path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5zm0 18.5c-3.82-.94-6.5-4.53-6.5-8.5V8.3l6.5-3.16 6.5 3.16V12c0 3.97-2.68 7.56-6.5 8.5z" fill="currentColor" data-v-a5f0ffc1></path><circle cx="12" cy="12" r="2" fill="currentColor" data-v-a5f0ffc1></circle></svg></div><h1 class="app-title" data-v-a5f0ffc1>AI 智能诊断</h1></div>',1)),e("nav",re,[(c(!0),l(x,null,k(J.value,t=>(c(),l("div",{key:t.key,class:b(["nav-item",{active:R.value===t.key}]),onClick:r=>R.value=t.key},[e("div",{class:"nav-icon",innerHTML:t.icon},null,8,ue),e("div",ve,[e("span",pe,o(t.label),1),e("span",he,o(t.desc),1)])],10,de))),128))]),e("div",{class:"nav-footer"},[e("button",{class:"knowledge-base-btn",onClick:q},[...s[3]||(s[3]=[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18"},[e("path",{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z",fill:"currentColor"})],-1),H(" 知识库浏览 ",-1)])])])]),e("main",fe,[e("div",{class:"messages-container",ref_key:"messagesContainer",ref:V},[e("div",me,[m.value.length===0?(c(),l("div",ge,[s[7]||(s[7]=e("h2",null,"欢迎使用 AI 智能诊断助手",-1)),s[8]||(s[8]=e("p",null,"请输入患者信息，我将为您提供专业的诊断分析",-1)),e("div",ye,[e("div",{class:"example-item",onClick:s[0]||(s[0]=t=>K(0))},[...s[5]||(s[5]=[e("span",null,"示例：头痛患者",-1)])]),e("div",{class:"example-item",onClick:s[1]||(s[1]=t=>K(1))},[...s[6]||(s[6]=[e("span",null,"示例：发热咳嗽",-1)])])])])):T("",!0),(c(!0),l(x,null,k(m.value,(t,r)=>(c(),l("div",{key:r,class:b(["message-item",t.role])},[t.role==="user"?(c(),l("div",_e,[s[9]||(s[9]=e("div",{class:"message-avatar user-avatar"},[e("svg",{viewBox:"0 0 24 24",width:"20",height:"20"},[e("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z",fill:"currentColor"})])],-1)),e("div",we,[e("p",xe,o(t.content),1),e("span",ke,o(t.time),1)])])):(c(),l("div",be,[s[23]||(s[23]=e("div",{class:"message-avatar ai-avatar"},[e("svg",{viewBox:"0 0 24 24",width:"20",height:"20"},[e("path",{d:"M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z",fill:"currentColor"})])],-1)),e("div",ze,[e("div",Ce,[e("div",Me,[s[10]||(s[10]=e("span",{class:"ai-badge"},"AI 诊断助手",-1)),e("span",He,o(t.time),1)]),e("div",Te,[s[17]||(s[17]=e("div",{class:"section-title"},[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z",fill:"currentColor"})]),H(" 知识图谱关联 ")],-1)),e("div",Ve,[(c(),l("svg",Be,[s[15]||(s[15]=e("g",{class:"node-group central"},[e("circle",{cx:"300",cy:"150",r:"35",class:"node-circle"}),e("text",{x:"300",y:"155","text-anchor":"middle",class:"node-label"},"症状集")],-1)),e("g",Se,[s[11]||(s[11]=e("circle",{cx:"180",cy:"80",r:"28",class:"node-circle"},null,-1)),e("text",Ie,o(t.keywords?.[0]||"头痛"),1)]),e("g",Le,[s[12]||(s[12]=e("circle",{cx:"420",cy:"80",r:"28",class:"node-circle"},null,-1)),e("text",$e,o(t.keywords?.[1]||"发热"),1)]),e("g",je,[s[13]||(s[13]=e("circle",{cx:"120",cy:"150",r:"24",class:"node-circle"},null,-1)),e("text",Re,o(t.keywords?.[2]||"呕吐"),1)]),e("g",De,[s[14]||(s[14]=e("circle",{cx:"480",cy:"150",r:"24",class:"node-circle"},null,-1)),e("text",Ee,o(t.keywords?.[3]||"恶心"),1)]),s[16]||(s[16]=j('<g class="node-group disease" data-v-a5f0ffc1><circle cx="180" cy="240" r="32" class="node-circle" data-v-a5f0ffc1></circle><text x="180" y="245" text-anchor="middle" class="node-label" font-size="11" data-v-a5f0ffc1>偏头痛</text></g><g class="node-group disease" data-v-a5f0ffc1><circle cx="420" cy="240" r="32" class="node-circle" data-v-a5f0ffc1></circle><text x="420" y="245" text-anchor="middle" class="node-label" font-size="11" data-v-a5f0ffc1>脑膜炎</text></g><line x1="275" y1="125" x2="200" y2="100" class="edge" stroke-width="2.5" data-v-a5f0ffc1></line><line x1="325" y1="125" x2="400" y2="100" class="edge" stroke-width="2.5" data-v-a5f0ffc1></line><line x1="270" y1="150" x2="144" y2="150" class="edge" stroke-width="2" data-v-a5f0ffc1></line><line x1="330" y1="150" x2="456" y2="150" class="edge" stroke-width="2" data-v-a5f0ffc1></line><line x1="275" y1="175" x2="200" y2="215" class="edge" stroke-width="3.5" data-v-a5f0ffc1></line><line x1="325" y1="175" x2="400" y2="215" class="edge" stroke-width="2" data-v-a5f0ffc1></line>',8))]))])]),e("div",Ne,[e("div",Ae,[s[18]||(s[18]=e("svg",{viewBox:"0 0 24 24",width:"18",height:"18"},[e("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z",fill:"currentColor"})],-1)),s[19]||(s[19]=H(" 病历分析报告 ",-1)),e("span",Ke,"置信度: "+o(t.confidence||87)+"%",1)]),e("div",Oe,[s[20]||(s[20]=e("h4",null,"诊断建议",-1)),e("div",Pe,[(c(!0),l(x,null,k(t.diagnosis||D,(a,d)=>(c(),l("div",{key:d,class:b(["diagnosis-card",`priority-${a.priority}`])},[e("div",Fe,[e("span",Je,"#"+o(d+1),1),e("span",Ue,o(a.name),1),e("span",qe,o(a.probability)+"%",1)]),e("p",Ge,o(a.reason),1)],2))),128))])]),e("div",Qe,[s[21]||(s[21]=e("h4",null,"建议检查项目",-1)),e("div",We,[(c(!0),l(x,null,k(t.recommendations||E,(a,d)=>(c(),l("span",{key:d,class:b(["rec-tag",a.priority])},o(a.name),3))),128))])]),e("div",Xe,[s[22]||(s[22]=e("h4",null,"临床注意事项",-1)),e("ul",Ye,[(c(!0),l(x,null,k(t.notes||N,(a,d)=>(c(),l("li",{key:d},o(a),1))),128))])])])])])]))],2))),128)),S.value?(c(),l("div",Ze,[...s[24]||(s[24]=[j('<div class="ai-message" data-v-a5f0ffc1><div class="message-avatar ai-avatar" data-v-a5f0ffc1><svg viewBox="0 0 24 24" width="20" height="20" data-v-a5f0ffc1><path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z" fill="currentColor" data-v-a5f0ffc1></path></svg></div><div class="thinking-indicator" data-v-a5f0ffc1><span class="dot" data-v-a5f0ffc1></span><span class="dot" data-v-a5f0ffc1></span><span class="dot" data-v-a5f0ffc1></span></div></div>',1)])])):T("",!0)])],512),y.value.length>0?(c(),l("div",es,[e("div",ss,[s[25]||(s[25]=e("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z",fill:"currentColor"})],-1)),s[26]||(s[26]=e("span",null,"关键词提取",-1)),e("span",ts,o(y.value.length)+" 项",1)]),e("div",is,[(c(!0),l(x,null,k(y.value,(t,r)=>(c(),l("div",{key:r,class:b(["keyword-tag",`intensity-${t.intensity}`])},[e("span",as,o(t.text),1),e("span",ns,o(t.category),1)],2))),128))])])):T("",!0),e("div",os,[e("div",ls,[e("div",cs,[e("button",{class:b(["tool-btn",{active:C.value}]),onClick:W,title:"语音输入"},"语音输入",2),e("button",{class:"tool-btn",onClick:X,title:"上传病历"},"上传病历")]),te(e("textarea",{ref_key:"chatInput",ref:g,"onUpdate:modelValue":s[2]||(s[2]=t=>p.value=t),class:"chat-input",placeholder:"请描述患者信息...（Ctrl + Enter 发送）",onKeydown:ae(ne(L,["ctrl"]),["enter"]),onInput:Q,rows:"1"},null,40,rs),[[ie,p.value]]),e("button",{class:"send-button",onClick:L,disabled:!p.value.trim()}," 发送 ",8,ds)])])]),e("aside",us,[e("div",vs,[s[27]||(s[27]=e("h3",null,"诊断进度",-1)),e("span",ps,o(U.value)+"%",1)]),e("div",hs,[(c(!0),l(x,null,k(_.value,(t,r)=>(c(),l("div",{key:t.id,class:b(["progress-step",{completed:t.status==="completed",active:t.status==="active",pending:t.status==="pending"}])},[e("div",fs,[e("div",ms,o(r+1),1),r<_.value.length-1?(c(),l("div",gs)):T("",!0)]),e("div",ys,[e("h4",_s,o(t.title),1),e("p",ws,o(t.desc),1),t.status==="completed"?(c(),l("div",xs,o(t.timestamp),1)):T("",!0)])],2))),128))]),e("div",{class:"progress-actions"},[e("button",{class:"progress-btn",onClick:Y},[...s[28]||(s[28]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z",fill:"currentColor"})],-1),H(" 导出报告 ",-1)])]),e("button",{class:"progress-btn secondary",onClick:Z},[...s[29]||(s[29]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"currentColor"})],-1),H(" 清空对话 ",-1)])])])])]))}},Cs=ee(ks,[["__scopeId","data-v-a5f0ffc1"]]);export{Cs as default};
